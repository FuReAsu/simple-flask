{% extends "base.html" %}

{% block title %}File - Simple-Flask{% endblock %}

{% block content %}
    <h1>Flask File I/O</h1>
    <p class="subtitle">Flask app to test file read/write</p>

    <div class="card">
        <div class="form-row">
            <input type="text" id="inputBox" placeholder="Enter something">
        </div>

        <div class="button-row">
            <button onclick="submitData(event, 'submit')">Submit</button>
            <button class="secondary" onclick="submitData(event, 'clear')">Clear</button>
        </div>

        <pre class="output">{{ content }}</pre>
    </div>
{% endblock %}

{% block scripts %}
<script>
    function submitData(event, action) {
        event.preventDefault();
        let inputValue = document.getElementById('inputBox').value;
        let formData = new URLSearchParams();

        if (action === 'submit') {
            formData.append('input', inputValue);
            formData.append('button', 'submitButton');
        } else if (action === 'clear') {
            formData.append('button', 'clearButton');
        }

        fetch("{{ url_for('input.input') }}", {
            method: 'POST',
            headers: {'Content-Type': 'application/x-www-form-urlencoded'},
            body: formData.toString()
        }).then(() => {
            document.getElementById('inputBox').value = '';
            location.reload();
        });
    }
</script>
{% endblock %}
